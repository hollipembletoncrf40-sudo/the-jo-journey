---
/**
 * Giscus 评论组件
 */
---

<div class="giscus-wrapper" id="giscus-container">
  <div id="giscus-loading" class="text-center py-12 text-white/30">
    加载评论中...
  </div>
</div>

<script is:inline>
  function loadGiscus() {
    const container = document.getElementById('giscus-container');
    const loading = document.getElementById('giscus-loading');
    if (!container) return;
    
    const script = document.createElement('script');
    script.src = 'https://giscus.app/client.js';
    script.setAttribute('data-repo', 'hollipembletoncrf40-sudo/the-jo-journey');
    script.setAttribute('data-repo-id', 'R_kgDOQyI37Q');
    script.setAttribute('data-category', 'Announcements');
    script.setAttribute('data-category-id', 'DIC_kwDOQyI37c4C0djC');
    script.setAttribute('data-mapping', 'pathname');
    script.setAttribute('data-strict', '0');
    script.setAttribute('data-reactions-enabled', '1');
    script.setAttribute('data-emit-metadata', '0');
    script.setAttribute('data-input-position', 'bottom');
    script.setAttribute('data-theme', 'noborder_dark');
    script.setAttribute('data-lang', 'zh-CN');
    script.crossOrigin = 'anonymous';
    script.async = true;
    
    script.onload = () => {
      if (loading) loading.style.display = 'none';
    };
    
    container.appendChild(script);
  }

  if (document.readyState === 'complete') {
    loadGiscus();
  } else {
    window.addEventListener('load', loadGiscus);
  }
</script>
